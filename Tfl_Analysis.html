<!DOCTYPE html>
<html class="light" lang="en">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>Tableau Prep Flow Analyzer | Tableau Tools</title>
  <meta name="description"
    content="Analyze Tableau Prep flows (.tfl, .tflx) directly in your browser. Visualize flow steps, joins, inputs, and outputs." />
  <meta name="keywords" content="Tableau Prep, Flow Analyzer, TFL, TFLX, Visualization, Mermaid" />
  <meta property="og:title" content="Tableau Prep Flow Analyzer" />
  <meta property="og:description" content="Visualize and analyze your Tableau Prep flows instantly." />
  <meta property="og:type" content="website" />

  <link rel="icon" type="image/svg+xml" href="icon.svg">

  <!-- Tailwind & Shared Theme -->
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <script src="js/shared/theme.js"></script>
  <link rel="stylesheet" href="css/style.css">

  <!-- Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>

  <!-- Prism for Syntax Highlighting -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

  <!-- Analytics -->
  <script type="text/javascript">
    (function (c, l, a, r, i, t, y) {
      c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments) };
      t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i;
      y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y);
    })(window, document, "clarity", "script", "txi1uqiq8y");
  </script>
</head>

<body class="bg-gray-50 text-gray-900 transition-colors duration-200">
  <div id="app" class="flex min-h-screen flex-col font-body">
    <div id="header-container"></div>

    <main class="flex-grow p-4 sm:p-6 lg:p-8">
      <div class="mx-auto max-w-7xl">
        <!-- Header Section -->
        <div class="mb-8">
          <h2 class="text-3xl font-black tracking-tight text-gray-900">Flow Analysis Dashboard</h2>
          <p class="text-sm text-gray-600 mt-2">Visualize and analyze your Tableau Prep flows instantly</p>
        </div>

        <!-- Upload Zone -->
        <div id="drop-zone"
          class="group relative flex cursor-pointer flex-col items-center justify-center rounded-2xl border-2 border-dashed border-gray-300 bg-white p-8 text-center transition-all hover:border-primary-500 hover:bg-primary-50/50 mb-8">
          <div
            class="mb-4 inline-flex h-16 w-16 items-center justify-center rounded-full bg-primary-100 text-primary-600 transition-transform group-hover:scale-110">
            <span
              class="material-symbols-outlined text-2xl text-gray-500 group-hover:text-primary-600">upload_file</span>
          </div>
          <div class="flex-grow">
            <p class="text-sm font-medium text-gray-900">Upload Tableau Prep Flow</p>
            <p class="text-xs text-gray-500">Drag & drop .tfl or .tflx files here</p>
          </div>
          <button onclick="event.stopPropagation(); document.getElementById('file-input').click()"
            class="mt-4 inline-flex h-9 items-center justify-center gap-2 rounded-lg bg-primary-500 px-4 text-sm font-bold text-white shadow-lg shadow-primary-500/20 transition-all hover:bg-primary-600 hover:shadow-primary-500/40 active:scale-95">
            <span class="material-symbols-outlined text-lg">folder_open</span>
            <span>Browse</span>
          </button>
          <input type="file" id="file-input" accept=".tfl,.tflx" multiple style="display: none;" />
        </div>

        <!-- Results Container -->
        <div id="results-container" class="grid grid-cols-1 gap-6">
          <!-- Empty State -->
          <div
            class="empty-state flex flex-col gap-6 rounded-2xl border border-dashed border-gray-300 bg-gray-50/50 p-12">
            <div class="flex flex-col items-center justify-center text-center text-gray-400">
              <div class="mb-4 inline-flex h-20 w-20 items-center justify-center rounded-full bg-white shadow-sm">
                <span class="material-symbols-outlined text-5xl opacity-50">account_tree</span>
              </div>
              <h3 class="text-lg font-bold text-gray-900">Waiting for flow file</h3>
              <p class="text-sm mt-1 max-w-md">Upload .tfl or .tflx files to analyze flow structure and dependencies.
              </p>
            </div>
          </div>
        </div>
      </div>
    </main>

    <div id="footer-container"></div>
  </div>

  <!-- Shared UI Logic -->
  <script src="js/shared/ui.js"></script>
  <!-- Flow Analysis Logic -->
  <script src="js/tfl_analyzer.js"></script>
</body>

</html>